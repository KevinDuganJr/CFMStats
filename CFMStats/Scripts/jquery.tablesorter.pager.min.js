(function($){'use strict';var ts=$.tablesorter;$.extend({tablesorterPager:new function(){this.defaults={container:null,ajaxUrl:null,customAjaxUrl:function(table,url){return url},ajaxError:null,ajaxObject:{dataType:'json'},processAjaxOnInit:!0,ajaxProcessing:function(ajax){return[0,[],null]},output:'{startRow} to {endRow} of {totalRows} rows',updateArrows:!0,page:0,pageReset:0,size:10,maxOptionSize:20,savePages:!0,storageKey:'tablesorter-pager',fixedHeight:!1,countChildRows:!1,removeRows:!1,cssFirst:'.first',cssPrev:'.prev',cssNext:'.next',cssLast:'.last',cssGoto:'.gotoPage',cssPageDisplay:'.pagedisplay',cssPageSize:'.pagesize',cssErrorRow:'tablesorter-errorRow',cssDisabled:'disabled',totalRows:0,totalPages:0,filteredRows:0,filteredPages:0,ajaxCounter:0,currentFilters:[],startRow:0,endRow:0,$size:null,last:{}};var pagerEvents='filterInit filterStart filterEnd sortEnd disablePager enablePager destroyPager updateComplete '+'pageSize pageSet pageAndSize pagerUpdate refreshComplete ',$this=this,pagerArrows=function(table,p,disable){var tmp,a='addClass',r='removeClass',d=p.cssDisabled,dis=!!disable,first=(dis||p.page===0),tp=getTotalPages(table,p),last=(dis||(p.page===tp-1)||tp===0);if(p.updateArrows){tmp=p.$container.find(p.cssFirst+','+p.cssPrev);tmp[first?a:r](d);tmp.each(function(){this.ariaDisabled=first});tmp=p.$container.find(p.cssNext+','+p.cssLast);tmp[last?a:r](d);tmp.each(function(){this.ariaDisabled=last})}},calcFilters=function(table,p){var normalized,indx,len,c=table.config,hasFilters=c.$table.hasClass('hasFilters');if(hasFilters&&!p.ajax){if(ts.isEmptyObject(c.cache)){p.filteredRows=p.totalRows=c.$tbodies.eq(0).children('tr').not(p.countChildRows?'':'.'+c.cssChildRow).length}else{p.filteredRows=0;normalized=c.cache[0].normalized;len=normalized.length;for(indx=0;indx<len;indx++){p.filteredRows+=p.regexRows.test(normalized[indx][c.columns].$row[0].className)?0:1}}}else if(!hasFilters){p.filteredRows=p.totalRows}},updatePageDisplay=function(table,p,completed){if(p.initializing){return}
var s,t,$out,$el,indx,len,options,output,c=table.config,namespace=c.namespace+'pager',sz=parsePageSize(p,p.size,'get');if(sz==='all'){sz=p.totalRows}
if(p.countChildRows){t[t.length]=c.cssChildRow}
p.totalPages=Math.ceil(p.totalRows/sz);c.totalRows=p.totalRows;parsePageNumber(table,p);calcFilters(table,p);c.filteredRows=p.filteredRows;p.filteredPages=Math.ceil(p.filteredRows/sz)||0;if(getTotalPages(table,p)>=0){t=(sz*p.page>p.filteredRows)&&completed;p.page=(t)?p.pageReset||0:p.page;p.startRow=(t)?sz*p.page+1:(p.filteredRows===0?0:sz*p.page+1);p.endRow=Math.min(p.filteredRows,p.totalRows,sz*(p.page+1));$out=p.$container.find(p.cssPageDisplay);if(typeof p.output==='function'){s=p.output(table,p)}else{output=$out.attr('data-pager-output'+(p.filteredRows<p.totalRows?'-filtered':''))||p.output;s=(p.ajaxData&&p.ajaxData.output?p.ajaxData.output||output:output).replace(/\{page([\-+]\d+)?\}/gi,function(m,n){return p.totalPages?p.page+(n?parseInt(n,10):1):0}).replace(/\{\w+(\s*:\s*\w+)?\}/gi,function(m){var len,indx,str=m.replace(/[{}\s]/g,''),extra=str.split(':'),data=p.ajaxData,deflt=/(rows?|pages?)$/i.test(str)?0:'';if(/(startRow|page)/.test(extra[0])&&extra[1]==='input'){len=(''+(extra[0]==='page'?p.totalPages:p.totalRows)).length;indx=extra[0]==='page'?p.page+1:p.startRow;return '<input type="text" class="ts-'+extra[0]+'" style="max-width:'+len+'em" value="'+indx+'"/>'}
return extra.length>1&&data&&data[extra[0]]?data[extra[0]][extra[1]]:p[str]||(data?data[str]:deflt)||deflt})}
$el=p.$container.find(p.cssGoto);if($el.length){t='';options=buildPageSelect(table,p);len=options.length;for(indx=0;indx<len;indx++){t+='<option value="'+options[indx]+'">'+options[indx]+'</option>'}
$el.html(t).val(p.page+1)}
if($out.length){$out[($out[0].nodeName==='INPUT')?'val':'html'](s);$out.find('.ts-startRow, .ts-page').unbind('change'+namespace).bind('change'+namespace,function(){var v=$(this).val(),pg=$(this).hasClass('ts-startRow')?Math.floor(v/sz)+1:v;c.$table.triggerHandler('pageSet'+namespace,[pg])})}}
pagerArrows(table,p);fixHeight(table,p);if(p.initialized&&completed!==!1){if(c.debug){console.log('Pager: Triggering pagerComplete')}
c.$table.triggerHandler('pagerComplete',p);if(p.savePages&&ts.storage){ts.storage(table,p.storageKey,{page:p.page,size:sz===p.totalRows?'all':sz})}}},buildPageSelect=function(table,p){var i,central_focus_size,focus_option_pages,insert_index,option_length,focus_length,pg=getTotalPages(table,p)||1,skip_set_size=Math.ceil((pg/p.maxOptionSize)/5)*5,large_collection=pg>p.maxOptionSize,current_page=p.page+1,start_page=skip_set_size,end_page=pg-skip_set_size,option_pages=[1],option_pages_start_page=(large_collection)?skip_set_size:1;for(i=option_pages_start_page;i<=pg;){option_pages[option_pages.length]=i;i=i+(large_collection?skip_set_size:1)}
option_pages[option_pages.length]=pg;if(large_collection){focus_option_pages=[];central_focus_size=Math.max(Math.floor(p.maxOptionSize/skip_set_size)-1,5);start_page=current_page-central_focus_size;if(start_page<1){start_page=1}
end_page=current_page+central_focus_size;if(end_page>pg){end_page=pg}
for(i=start_page;i<=end_page;i++){focus_option_pages[focus_option_pages.length]=i}
option_pages=$.grep(option_pages,function(value,indx){return $.inArray(value,option_pages)===indx});option_length=option_pages.length;focus_length=focus_option_pages.length;if(option_length-focus_length>skip_set_size/2&&option_length+focus_length>p.maxOptionSize){insert_index=Math.floor(option_length/2)-Math.floor(focus_length/2);Array.prototype.splice.apply(option_pages,[insert_index,focus_length])}
option_pages=option_pages.concat(focus_option_pages)}
option_pages=$.grep(option_pages,function(value,indx){return $.inArray(value,option_pages)===indx}).sort(function(a,b){return a-b});return option_pages},fixHeight=function(table,p){var d,h,bs,c=table.config,$b=c.$tbodies.eq(0);$b.find('tr.pagerSavedHeightSpacer').remove();if(p.fixedHeight&&!p.isDisabled){h=$.data(table,'pagerSavedHeight');if(h){bs=0;if($(table).css('border-spacing').split(' ').length>1){bs=$(table).css('border-spacing').split(' ')[1].replace(/[^-\d\.]/g,'')}
d=h-$b.height()+(bs*p.size)-bs;if(d>5&&$.data(table,'pagerLastSize')===p.size&&$b.children('tr:visible').length<(p.size==='all'?p.totalRows:p.size)){$b.append('<tr class="pagerSavedHeightSpacer '+c.selectorRemove.slice(1)+'" style="height:'+d+'px;"></tr>')}}}},changeHeight=function(table,p){var h,c=table.config,$b=c.$tbodies.eq(0);$b.find('tr.pagerSavedHeightSpacer').remove();if(!$b.children('tr:visible').length){$b.append('<tr class="pagerSavedHeightSpacer '+c.selectorRemove.slice(1)+'"><td>&nbsp</td></tr>')}
h=$b.children('tr').eq(0).height()*(p.size==='all'?p.totalRows:p.size);$.data(table,'pagerSavedHeight',h);fixHeight(table,p);$.data(table,'pagerLastSize',p.size)},hideRows=function(table,p){if(!p.ajaxUrl){var i,lastIndex=0,c=table.config,rows=c.$tbodies.eq(0).children('tr'),l=rows.length,sz=p.size==='all'?p.totalRows:p.size,s=(p.page*sz),e=s+sz,last=0,j=0;p.cacheIndex=[];for(i=0;i<l;i++){if(!p.regexFiltered.test(rows[i].className)){if(j===s&&rows[i].className.match(c.cssChildRow)){rows[i].style.display='none'}else{rows[i].style.display=(j>=s&&j<e)?'':'none';if(last!==j&&j>=s&&j<e){p.cacheIndex[p.cacheIndex.length]=i;last=j}
j+=rows[i].className.match(c.cssChildRow+'|'+c.selectorRemove.slice(1))&&!p.countChildRows?0:1;if(j===e&&rows[i].style.display!=='none'&&rows[i].className.match(ts.css.cssHasChild)){lastIndex=i}}}}
if(lastIndex>0&&rows[lastIndex].className.match(ts.css.cssHasChild)){while(++lastIndex<l&&rows[lastIndex].className.match(c.cssChildRow)){rows[lastIndex].style.display=''}}}},hideRowsSetup=function(table,p){p.size=parsePageSize(p,p.$container.find(p.cssPageSize).val(),'get');setPageSize(table,p.size,p);pagerArrows(table,p);if(!p.removeRows){hideRows(table,p);$(table).bind('sortEnd filterEnd '.split(' ').join(table.config.namespace+'pager '),function(){hideRows(table,p)})}},renderAjax=function(data,table,p,xhr,settings,exception){if(typeof p.ajaxProcessing==='function'){table.config.$tbodies.eq(0).empty();var i,j,t,hsh,$f,$sh,$headers,$h,icon,th,d,l,rr_count,len,sz,c=table.config,$table=c.$table,tds='',result=p.ajaxProcessing(data,table,xhr)||[0,[]],hl=$table.find('thead th').length;ts.showError(table);if(exception){if(c.debug){console.error('Pager: >> Ajax Error',xhr,settings,exception)}
ts.showError(table,xhr,settings,exception);c.$tbodies.eq(0).children('tr').detach();p.totalRows=0}else{if(!$.isArray(result)){p.ajaxData=result;c.totalRows=p.totalRows=result.total;c.filteredRows=p.filteredRows=typeof result.filteredRows!=='undefined'?result.filteredRows:result.total;th=result.headers;d=result.rows||[]}else{t=isNaN(result[0])&&!isNaN(result[1]);rr_count=result[t?1:0];p.totalRows=isNaN(rr_count)?p.totalRows||0:rr_count;c.totalRows=c.filteredRows=p.filteredRows=p.totalRows;d=p.totalRows===0?[]:result[t?0:1]||[];th=result[2]}
l=d&&d.length;if(d instanceof jQuery){if(p.processAjaxOnInit){c.$tbodies.eq(0).empty();c.$tbodies.eq(0).append(d)}}else if(l){for(i=0;i<l;i++){tds+='<tr>';for(j=0;j<d[i].length;j++){tds+=/^\s*<td/.test(d[i][j])?$.trim(d[i][j]):'<td>'+d[i][j]+'</td>'}
tds+='</tr>'}
if(p.processAjaxOnInit){c.$tbodies.eq(0).html(tds)}}
p.processAjaxOnInit=!0;if(th){hsh=$table.hasClass('hasStickyHeaders');$sh=hsh?c.widgetOptions.$sticky.children('thead:first').children('tr:not(.'+c.cssIgnoreRow+')').children():'';$f=$table.find('tfoot tr:first').children();$headers=c.$headers.filter('th ');len=$headers.length;for(j=0;j<len;j++){$h=$headers.eq(j);if($h.find('.'+ts.css.icon).length){icon=$h.find('.'+ts.css.icon).clone(!0);$h.find('.'+ts.css.headerIn).html(th[j]).append(icon);if(hsh&&$sh.length){icon=$sh.eq(j).find('.'+ts.css.icon).clone(!0);$sh.eq(j).find('.'+ts.css.headerIn).html(th[j]).append(icon)}}else{$h.find('.'+ts.css.headerIn).html(th[j]);if(hsh&&$sh.length){p.$container=p.$container.add(c.widgetOptions.$sticky);$sh.eq(j).find('.'+ts.css.headerIn).html(th[j])}}
$f.eq(j).html(th[j])}}}
if(c.showProcessing){ts.isProcessing(table)}
sz=parsePageSize(p,p.size,'get');p.totalPages=sz==='all'?1:Math.ceil(p.totalRows/sz);p.last.totalRows=p.totalRows;p.last.currentFilters=p.currentFilters;p.last.sortList=(c.sortList||[]).join(',');updatePageDisplay(table,p,!1);ts.updateCache(c,function(){if(p.initialized){setTimeout(function(){if(c.debug){console.log('Pager: Triggering pagerChange')}
$table.triggerHandler('pagerChange',p);ts.applyWidget(table);updatePageDisplay(table,p,!0)},0)}})}
if(!p.initialized){pagerInitialized(table,p)}},getAjax=function(table,p){var url=getAjaxUrl(table,p),$doc=$(document),counter,c=table.config,namespace=c.namespace+'pager';if(url!==''){if(c.showProcessing){ts.isProcessing(table,!0)}
$doc.bind('ajaxError'+namespace,function(e,xhr,settings,exception){renderAjax(null,table,p,xhr,settings,exception);$doc.unbind('ajaxError'+namespace)});counter=++p.ajaxCounter;p.last.ajaxUrl=url;p.ajaxObject.url=url;p.ajaxObject.success=function(data,status,jqxhr){if(counter<p.ajaxCounter){return}
renderAjax(data,table,p,jqxhr);$doc.unbind('ajaxError'+namespace);if(typeof p.oldAjaxSuccess==='function'){p.oldAjaxSuccess(data)}};if(c.debug){console.log('Pager: Ajax initialized',p.ajaxObject)}
$.ajax(p.ajaxObject)}},getAjaxUrl=function(table,p){var indx,len,c=table.config,url=(p.ajaxUrl)?p.ajaxUrl.replace(/\{page([\-+]\d+)?\}/,function(s,n){return p.page+(n?parseInt(n,10):0)}).replace(/\{size\}/g,p.size):'',sortList=c.sortList,filterList=p.currentFilters||$(table).data('lastSearch')||[],sortCol=url.match(/\{\s*sort(?:List)?\s*:\s*(\w*)\s*\}/),filterCol=url.match(/\{\s*filter(?:List)?\s*:\s*(\w*)\s*\}/),arry=[];if(sortCol){sortCol=sortCol[1];len=sortList.length;for(indx=0;indx<len;indx++){arry[arry.length]=sortCol+'['+sortList[indx][0]+']='+sortList[indx][1]}
url=url.replace(/\{\s*sort(?:List)?\s*:\s*(\w*)\s*\}/g,arry.length?arry.join('&'):sortCol);arry=[]}
if(filterCol){filterCol=filterCol[1];len=filterList.length;for(indx=0;indx<len;indx++){if(filterList[indx]){arry[arry.length]=filterCol+'['+indx+']='+encodeURIComponent(filterList[indx])}}
url=url.replace(/\{\s*filter(?:List)?\s*:\s*(\w*)\s*\}/g,arry.length?arry.join('&'):filterCol);p.currentFilters=filterList}
if(typeof p.customAjaxUrl==='function'){url=p.customAjaxUrl(table,url)}
if(c.debug){console.log('Pager: Ajax url = '+url)}
return url},renderTable=function(table,rows,p){var $tb,index,count,added,$t=$(table),c=table.config,f=c.$table.hasClass('hasFilters'),l=rows&&rows.length||0,e=p.size==='all'?p.totalRows:p.size,s=(p.page*e);if(l<1){if(c.debug){console.warn('Pager: >> No rows for pager to render')}
return}
if(p.page>=p.totalPages){moveToLastPage(table,p)}
p.cacheIndex=[];p.isDisabled=!1;if(p.initialized){if(c.debug){console.log('Pager: Triggering pagerChange')}
$t.triggerHandler('pagerChange',p)}
if(!p.removeRows){hideRows(table,p)}else{ts.clearTableBody(table);$tb=ts.processTbody(table,c.$tbodies.eq(0),!0);index=f?0:s;count=f?0:s;added=0;while(added<e&&index<rows.length){if(!f||!p.regexFiltered.test(rows[index][0].className)){count++;if(count>s&&added<=e){added++;p.cacheIndex[p.cacheIndex.length]=index;$tb.append(rows[index])}}
index++}
ts.processTbody(table,$tb,!1)}
updatePageDisplay(table,p);if(table.isUpdating){if(c.debug){console.log('Pager: Triggering updateComplete')}
$t.triggerHandler('updateComplete',[table,!0])}},showAllRows=function(table,p){var index,$controls,len;if(p.ajax){pagerArrows(table,p,!0)}else{$.data(table,'pagerLastPage',p.page);$.data(table,'pagerLastSize',p.size);p.page=0;p.size=p.totalPages;p.totalPages=1;$(table).addClass('pagerDisabled').removeAttr('aria-describedby').find('tr.pagerSavedHeightSpacer').remove();renderTable(table,table.config.rowsCopy,p);p.isDisabled=!0;ts.applyWidget(table);if(table.config.debug){console.log('Pager: Disabled')}}
$controls=p.$container.find(p.cssGoto+','+p.cssPageSize+', .ts-startRow, .ts-page');len=$controls.length;for(index=0;index<len;index++){$controls.eq(index).addClass(p.cssDisabled)[0].disabled=!0;$controls[index].ariaDisabled=!0}},updateCache=function(table){var c=table.config,p=c.pager;ts.updateCache(c,function(){var i,rows=[],n=table.config.cache[0].normalized;p.totalRows=n.length;for(i=0;i<p.totalRows;i++){rows[rows.length]=n[i][c.columns].$row}
c.rowsCopy=rows;moveToPage(table,p,!0)})},moveToPage=function(table,p,pageMoved){if(p.isDisabled){return}
var tmp,c=table.config,$t=$(table),l=p.last;if(pageMoved!==!1&&p.initialized&&ts.isEmptyObject(c.cache)){return updateCache(table)}
if(p.ajax&&ts.hasWidget(table,'filter')&&!c.widgetOptions.filter_initialized){return}
parsePageNumber(table,p);calcFilters(table,p);l.currentFilters=(l.currentFilters||[]).join('')===''?[]:l.currentFilters;p.currentFilters=(p.currentFilters||[]).join('')===''?[]:p.currentFilters;if(l.page===p.page&&l.size===p.size&&l.totalRows===p.totalRows&&(l.currentFilters||[]).join(',')===(p.currentFilters||[]).join(',')&&(l.ajaxUrl||'')===(p.ajaxObject.url||'')&&(l.optAjaxUrl||'')===(p.ajaxUrl||'')&&l.sortList===(c.sortList||[]).join(',')){return}
if(c.debug){console.log('Pager: Changing to page '+p.page)}
p.last={page:p.page,size:p.size,sortList:(c.sortList||[]).join(','),totalRows:p.totalRows,currentFilters:p.currentFilters||[],ajaxUrl:p.ajaxObject.url||'',optAjaxUrl:p.ajaxUrl||''};if(p.ajax){if(!p.processAjaxOnInit&&!ts.isEmptyObject(p.initialRows)){p.processAjaxOnInit=!0;tmp=p.initialRows;p.totalRows=typeof tmp.total!=='undefined'?tmp.total:(c.debug?console.error('Pager: no initial total page set!')||0:0);p.filteredRows=typeof tmp.filtered!=='undefined'?tmp.filtered:(c.debug?console.error('Pager: no initial filtered page set!')||0:0);pagerInitialized(table,p)}else{getAjax(table,p)}}else if(!p.ajax){renderTable(table,c.rowsCopy,p)}
$.data(table,'pagerLastPage',p.page);if(p.initialized&&pageMoved!==!1){if(c.debug){console.log('Pager: Triggering pageMoved')}
$t.triggerHandler('pageMoved',p);ts.applyWidget(table);if(table.isUpdating){if(c.debug){console.log('Pager: Triggering updateComplete')}
$t.triggerHandler('updateComplete',[table,!0])}}},getTotalPages=function(table,p){return ts.hasWidget(table,'filter')?Math.min(p.totalPages,p.filteredPages):p.totalPages},parsePageNumber=function(table,p){var min=getTotalPages(table,p)-1;p.page=parseInt(p.page,10);if(p.page<0||isNaN(p.page)){p.page=0}
if(p.page>min&&min>=0){p.page=min}
return p.page},parsePageSize=function(p,size,mode){var s=parseInt(size,10)||p.size||p.settings.size||10;if(p.initialized&&(/all/i.test(s+' '+size)||s===p.totalRows)){return p.$container.find(p.cssPageSize+' option[value="all"]').length?'all':p.totalRows}
return mode==='get'?s:p.size},setPageSize=function(table,size,p){p.size=parsePageSize(p,size,'get');p.$container.find(p.cssPageSize).val(p.size);$.data(table,'pagerLastPage',parsePageNumber(table,p));$.data(table,'pagerLastSize',p.size);p.totalPages=p.size==='all'?1:Math.ceil(p.totalRows/p.size);p.filteredPages=p.size==='all'?1:Math.ceil(p.filteredRows/p.size)},moveToFirstPage=function(table,p){p.page=0;moveToPage(table,p)},moveToLastPage=function(table,p){p.page=getTotalPages(table,p)-1;moveToPage(table,p)},moveToNextPage=function(table,p){p.page++;var last=getTotalPages(table,p)-1;if(p.page>=last){p.page=last}
moveToPage(table,p)},moveToPrevPage=function(table,p){p.page--;if(p.page<=0){p.page=0}
moveToPage(table,p)},pagerInitialized=function(table,p){p.initialized=!0;p.initializing=!1;if(table.config.debug){console.log('Pager: Triggering pagerInitialized')}
$(table).triggerHandler('pagerInitialized',p);ts.applyWidget(table);updatePageDisplay(table,p)},resetState=function(table,p){var c=table.config;c.pager=$.extend(!0,{},$.tablesorterPager.defaults,p.settings);init(table,p.settings)},destroyPager=function(table,p){var c=table.config,namespace=c.namespace+'pager',ctrls=[p.cssFirst,p.cssPrev,p.cssNext,p.cssLast,p.cssGoto,p.cssPageSize].join(',');showAllRows(table,p);p.$container.hide().find(ctrls).unbind(namespace);c.appender=null;c.$table.unbind(namespace);if(ts.storage){ts.storage(table,p.storageKey,'')}
delete c.pager;delete c.rowsCopy},enablePager=function(table,p,triggered){var info,size,$el,c=table.config;p.$container.find(p.cssGoto+','+p.cssPageSize+',.ts-startRow, .ts-page').removeClass(p.cssDisabled).removeAttr('disabled').each(function(){this.ariaDisabled=!1});p.isDisabled=!1;p.page=$.data(table,'pagerLastPage')||p.page||0;$el=p.$container.find(p.cssPageSize);size=$el.find('option[selected]').val();p.size=$.data(table,'pagerLastSize')||parsePageSize(p,size,'get');p.totalPages=p.size==='all'?1:Math.ceil(getTotalPages(table,p)/p.size);setPageSize(table,p.size,p);if(table.id&&!c.$table.attr('aria-describedby')){$el=p.$container.find(p.cssPageDisplay);info=$el.attr('id');if(!info){info=table.id+'_pager_info';$el.attr('id',info)}
c.$table.attr('aria-describedby',info)}
changeHeight(table,p);if(triggered){ts.update(c);setPageSize(table,p.size,p);moveToPage(table,p);hideRowsSetup(table,p);if(c.debug){console.log('Pager: Enabled')}}},init=function(table,settings){var t,ctrls,fxn,size,$el,c=table.config,wo=c.widgetOptions,p=c.pager=$.extend(!0,{},$.tablesorterPager.defaults,settings),$t=c.$table,namespace=c.namespace+'pager',pager=p.$container=$(p.container).addClass('tablesorter-pager').show();p.settings=$.extend(!0,{},$.tablesorterPager.defaults,settings);if(c.debug){console.log('Pager: Initializing')}
p.oldAjaxSuccess=p.oldAjaxSuccess||p.ajaxObject.success;c.appender=$this.appender;p.initializing=!0;if(p.savePages&&ts.storage){t=ts.storage(table,p.storageKey)||{};p.page=isNaN(t.page)?p.page:t.page;p.size=t.size==='all'?t.size:(isNaN(t.size)?p.size:t.size)||p.setSize||10;setPageSize(table,p.size,p)}
p.regexRows=new RegExp('('+(wo.filter_filteredRow||'filtered')+'|'+c.selectorRemove.slice(1)+'|'+c.cssChildRow+')');p.regexFiltered=new RegExp(wo.filter_filteredRow||'filtered');$t.unbind(pagerEvents.split(' ').join(namespace+' ').replace(/\s+/g,' ')).bind('filterInit filterStart '.split(' ').join(namespace+' '),function(e,filters){p.currentFilters=$.isArray(filters)?filters:c.$table.data('lastSearch');var filtersEqual;if(p.ajax&&e.type==='filterInit'){return moveToPage(table,p,!1)}
if(ts.filter.equalFilters){filtersEqual=ts.filter.equalFilters(c,c.lastSearch,p.currentFilters)}else{filtersEqual=(c.lastSearch||[]).join('')!==(p.currentFilters||[]).join('')}
if(e.type==='filterStart'&&p.pageReset!==!1&&!filtersEqual){p.page=p.pageReset}}).bind('filterEnd sortEnd '.split(' ').join(namespace+' '),function(){p.currentFilters=c.$table.data('lastSearch');if(p.initialized||p.initializing){if(c.delayInit&&c.rowsCopy&&c.rowsCopy.length===0){updateCache(table)}
updatePageDisplay(table,p,!1);moveToPage(table,p,!1);ts.applyWidget(table)}}).bind('disablePager'+namespace,function(e){e.stopPropagation();showAllRows(table,p)}).bind('enablePager'+namespace,function(e){e.stopPropagation();enablePager(table,p,!0)}).bind('destroyPager'+namespace,function(e){e.stopPropagation();destroyPager(table,p)}).bind('resetToLoadState'+namespace,function(e){e.stopPropagation();resetState(table,p)}).bind('updateComplete'+namespace,function(e,table,triggered){e.stopPropagation();if(!table||triggered||p.ajax){return}
var $rows=c.$tbodies.eq(0).children('tr').not(c.selectorRemove);p.totalRows=$rows.length-(p.countChildRows?0:$rows.filter('.'+c.cssChildRow).length);p.totalPages=p.size==='all'?1:Math.ceil(p.totalRows/p.size);if($rows.length&&c.rowsCopy&&c.rowsCopy.length===0){updateCache(table)}
if(p.page>=p.totalPages){moveToLastPage(table,p)}
hideRows(table,p);changeHeight(table,p);updatePageDisplay(table,p,!0)}).bind('pageSize refreshComplete '.split(' ').join(namespace+' '),function(e,size){e.stopPropagation();setPageSize(table,parsePageSize(p,size,'get'),p);moveToPage(table,p);hideRows(table,p);updatePageDisplay(table,p,!1)}).bind('pageSet pagerUpdate '.split(' ').join(namespace+' '),function(e,num){e.stopPropagation();if(e.type==='pagerUpdate'){num=typeof num==='undefined'?p.page+1:num;p.last.page=!0}
p.page=(parseInt(num,10)||1)-1;moveToPage(table,p,!0);updatePageDisplay(table,p,!1)}).bind('pageAndSize'+namespace,function(e,page,size){e.stopPropagation();p.page=(parseInt(page,10)||1)-1;setPageSize(table,parsePageSize(p,size,'get'),p);moveToPage(table,p,!0);hideRows(table,p);updatePageDisplay(table,p,!1)});ctrls=[p.cssFirst,p.cssPrev,p.cssNext,p.cssLast];fxn=[moveToFirstPage,moveToPrevPage,moveToNextPage,moveToLastPage];if(c.debug&&!pager.length){console.warn('Pager: >> Container not found')}
pager.find(ctrls.join(',')).attr('tabindex',0).unbind('click'+namespace).bind('click'+namespace,function(e){e.stopPropagation();var i,$t=$(this),l=ctrls.length;if(!$t.hasClass(p.cssDisabled)){for(i=0;i<l;i++){if($t.is(ctrls[i])){fxn[i](table,p);break}}}});$el=pager.find(p.cssGoto);if($el.length){$el.unbind('change'+namespace).bind('change'+namespace,function(){p.page=$(this).val()-1;moveToPage(table,p,!0);updatePageDisplay(table,p,!1)})}else if(c.debug){console.warn('Pager: >> Goto selector not found')}
$el=pager.find(p.cssPageSize);if($el.length){$el.find('option').removeAttr('selected');$el.unbind('change'+namespace).bind('change'+namespace,function(){if(!$(this).hasClass(p.cssDisabled)){var size=$(this).val();setPageSize(table,size,p);moveToPage(table,p);changeHeight(table,p)}
return!1})}else if(c.debug){console.warn('Pager: >> Size selector not found')}
p.initialized=!1;$t.triggerHandler('pagerBeforeInitialized',p);enablePager(table,p,!1);if(typeof p.ajaxUrl==='string'){p.ajax=!0;c.widgetOptions.filter_serversideFiltering=!0;c.serverSideSorting=!0;moveToPage(table,p)}else{p.ajax=!1;ts.appendCache(c,!0);hideRowsSetup(table,p)}
if(!p.ajax&&!p.initialized){p.initializing=!1;p.initialized=!0;setPageSize(table,p.size,p);moveToPage(table,p);if(c.debug){console.log('Pager: Triggering pagerInitialized')}
c.$table.triggerHandler('pagerInitialized',p);if(!(c.widgetOptions.filter_initialized&&ts.hasWidget(table,'filter'))){updatePageDisplay(table,p,!1)}}
c.widgetInit.pager=!0};$this.appender=function(table,rows){var c=table.config,p=c.pager;if(!p.ajax){c.rowsCopy=rows;p.totalRows=p.countChildRows?c.$tbodies.eq(0).children('tr').length:rows.length;p.size=$.data(table,'pagerLastSize')||p.size||p.settings.size||10;p.totalPages=p.size==='all'?1:Math.ceil(p.totalRows/p.size);renderTable(table,rows,p);updatePageDisplay(table,p,!1)}};$this.construct=function(settings){return this.each(function(){if(!(this.config&&this.hasInitialized)){return}
init(this,settings)})}}()});ts.showError=function(table,xhr,settings,exception){var $row,$table=$(table),c=$table[0].config,wo=c&&c.widgetOptions,errorRow=c.pager&&c.pager.cssErrorRow||wo&&wo.pager_css&&wo.pager_css.errorRow||'tablesorter-errorRow',typ=typeof xhr,valid=!0,message='',removeRow=function(){c.$table.find('thead').find(c.selectorRemove).remove()};if(!$table.length){console.error('tablesorter showError: no table parameter passed');return}
if(typeof c.pager.ajaxError==='function'){valid=c.pager.ajaxError(c,xhr,settings,exception);if(valid===!1){return removeRow()}else{message=valid}}else if(typeof wo.pager_ajaxError==='function'){valid=wo.pager_ajaxError(c,xhr,settings,exception);if(valid===!1){return removeRow()}else{message=valid}}
if(message===''){if(typ==='object'){message=xhr.status===0?'Not connected, verify Network':xhr.status===404?'Requested page not found [404]':xhr.status===500?'Internal Server Error [500]':exception==='parsererror'?'Requested JSON parse failed':exception==='timeout'?'Time out error':exception==='abort'?'Ajax Request aborted':'Uncaught error: '+xhr.statusText+' ['+xhr.status+']'}else if(typ==='string'){message=xhr}else{return removeRow()}}
$row=(/tr\>/.test(message)?$(message):$('<tr><td colspan="'+c.columns+'">'+message+'</td></tr>')).click(function(){$(this).remove()}).appendTo(c.$table.find('thead:first')).addClass(errorRow+' '+c.selectorRemove.slice(1)).attr({role:'alert','aria-live':'assertive'})};$.fn.extend({tablesorterPager:$.tablesorterPager.construct})})(jQuery)